# ./requirements/nginx/conf/nginx.conf

server {
    # Listen on port 443 for HTTPS traffic.
    listen 443 ssl;

    # The server name. This is a placeholder that will be replaced by envsubst.
    # It should look like this: server_name ychagri.42.fr;
    server_name ${DOMAIN_NAME};

    # CORRECT path to the public SSL certificate file.
    ssl_certificate /etc/nginx/ssl/nginx.crt;

    # CORRECT path to the private SSL key file.
    ssl_certificate_key /etc/nginx/ssl/nginx.key;

    # Define the SSL/TLS protocols to use.
    ssl_protocols TLSv1.2 TLSv1.3;

    # The root directory for web files.
    root /var/www/html;

    # The default file to look for.
    index index.php;

    # This block handles all requests for .php files.
    location ~ \.php$ {
        try_files $uri =4_4;
        fastcgi_pass wordpress:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
}