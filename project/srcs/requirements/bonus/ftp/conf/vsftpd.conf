# ./requirements/ftp/conf/vsftpd.conf

# --- Docker & Foreground Control ---
# This directive tells vsftpd not to run as a background daemon.
background=NO

# --- Basic Server Settings ---
anonymous_enable=NO
local_enable=YES
write_enable=YES

# --- Security Settings ---
chroot_local_user=YES
allow_writeable_chroot=YES

# --- THIS IS THE FIX ---
# We are reverting to the standard, compatible directives.
# `listen=YES` tells vsftpd to run in standalone mode.
# `listen_ipv6=NO` tells the standalone server to ONLY bind to an IPv4 socket,
# which is what we need for Docker and avoids the silent exit bug.
listen=YES
listen_ipv6=NO

# 'listen_port' is valid again because we are using 'listen=YES'.
listen_port=21

# --- Passive Mode Configuration ---
pasv_enable=YES
pasv_address=0.0.0.0
pasv_min_port=21100
pasv_max_port=21110

# --- Logging ---
log_ftp_protocol=YES
xferlog_enable=YES
xferlog_std_format=NO